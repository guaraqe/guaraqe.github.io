<!DOCTYPE html>
<html lang="en" data-theme="light">
<head profile="http://www.w3.org/2005/10/profile">
    <meta charset="UTF-8">
    <meta name="description" content="Reference compilation of mathematical laws for Haskell’s core type
classes
">
    <meta name="author" content="Juan Raphael Diaz Simões">
    <meta name="keywords" content="Haskell, functional programming, software engineering, bioinformatics, performance optimization, Juan Simões">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="index, follow">
    <title>Haskell type classes: a compilation of laws
</title>
    
    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="Haskell type classes: a compilation of laws
">
    <meta property="og:description" content="Reference compilation of mathematical laws for Haskell’s core type
classes
">
    <meta property="og:url" content="https://guaraqe.github.io/posts/2017-11-01-type-classes-laws.html">
    <meta property="og:site_name" content="Juan Raphael Diaz Simões">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Haskell type classes: a compilation of laws
">
    <meta name="twitter:description" content="Reference compilation of mathematical laws for Haskell’s core type
classes
">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://guaraqe.github.io/posts/2017-11-01-type-classes-laws.html">
    
    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BlogPosting",
      "name": "Haskell type classes: a compilation of laws
",
      "description": "Reference compilation of mathematical laws for Haskell’s core type
classes
",
      "url": "https://guaraqe.github.io/posts/2017-11-01-type-classes-laws.html",
      "author": {
        "@type": "Person",
        "name": "Juan Raphael Diaz Simões",
        "url": "https://guaraqe.github.io"
      },
      "publisher": {
        "@type": "Person",
        "name": "Juan Raphael Diaz Simões"
      },
      "inLanguage": "en-US"
    }
    </script>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/syntax.css">
    <link href="https://cdn.jsdelivr.net/npm/daisyui@3.1.0/dist/full.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" integrity="sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn" crossorigin="anonymous">

    <!-- The loading of KaTeX is deferred to speed up page rendering -->
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js" integrity="sha384-cpW21h6RZv/phavutF+AuVYrr+dA8xD9zs6FwLpaCct6O9ctzYFfFr4dgmgccOTx" crossorigin="anonymous"></script>

    <!-- To automatically render math in text elements, include the auto-render extension: -->
    <script>document.addEventListener("DOMContentLoaded", function () {
   var mathElements = document.getElementsByClassName("math");
   var macros = [];
   for (var i = 0; i < mathElements.length; i++) {
    var texText = mathElements[i].firstChild;
    if (mathElements[i].tagName == "SPAN") {
     katex.render(texText.data, mathElements[i], {
      displayMode: mathElements[i].classList.contains('display'),
      throwOnError: false,
      macros: macros,
      fleqn: false
     });
  }}});
    </script>

</head>
<body>
    <header>
        <div class="navbar bg-base-100 px-4 py-3">
          <div class="navbar-start">
            <a href="/" class="flex items-center group">
              <img src="/images/juan.png" alt="Juan Simões" class="w-8 h-8 rounded-full object-cover mr-3 group-hover:scale-105 transition-transform">
              <span class="text-lg font-medium text-gray-800 group-hover:text-blue-600 transition-colors hidden sm:inline">Juan Raphael Diaz Simões</span>
              <span class="text-lg font-medium text-gray-800 group-hover:text-blue-600 transition-colors sm:hidden">Juan Simões</span>
            </a>
          </div>
          <div class="navbar-end">
            <div class="hidden sm:block">
              <ul class="menu menu-horizontal text-sm space-x-1">
                <li><a href="/posts" class="hover:bg-gray-100 rounded-md px-2 py-1 transition-colors">Writing</a></li>
                <li><a href="/courses" class="hover:bg-gray-100 rounded-md px-2 py-1 transition-colors">Teaching</a></li>
                <li><a href="/cv.html" class="hover:bg-gray-100 rounded-md px-2 py-1 transition-colors">CV</a></li>
                <li><a href="/projects.html" class="hover:bg-gray-100 rounded-md px-2 py-1 transition-colors">Projects</a></li>
              </ul>
            </div>
            <div class="block sm:hidden">
              <div class="grid grid-cols-2 gap-1 text-xs">
                <a href="/posts" class="hover:bg-gray-100 rounded-md px-2 py-1 transition-colors text-center">Writing</a>
                <a href="/cv.html" class="hover:bg-gray-100 rounded-md px-2 py-1 transition-colors text-center">CV</a>
                <a href="/courses" class="hover:bg-gray-100 rounded-md px-2 py-1 transition-colors text-center">Teaching</a>
                <a href="/projects.html" class="hover:bg-gray-100 rounded-md px-2 py-1 transition-colors text-center">Projects</a>
              </div>
            </div>
          </div>
        </div>
    </header>
    <div class="md:flex justify-center bg-base-100">
    <article class="prose max-w-prose">
        <header>
            <h1 class="text-3xl mb-5">
                Haskell type classes: a compilation of laws

            </h1>
            <time class="mb-5 block text-gray-600" datetime="2017-11-01">November  1, 2017</time>
        </header>

        <main>
            <p class="mb-3">This post is a reference for type classes’ laws. It will be expanded with time.</p>
<hr />
<h1 class="text-2xl mt-5 mb-5" data-number="1" id="functor"><span class="header-section-number">1</span> Functor</h1>
<div class="sourceCode mb-3 notranslate" id="cb1"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb1-1"><a class="link link-hover text-zinc-600" href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> <span class="dt">Functor</span> f <span class="kw">where</span></span>
<span id="cb1-2"><a class="link link-hover text-zinc-600" href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ot">  fmap ::</span> (a <span class="ot">-&gt;</span> b) <span class="ot">-&gt;</span> f a <span class="ot">-&gt;</span> f b</span></code></pre></div>
<h2 class="text-xl mt-5 mb-5" data-number="1.1" id="laws"><span class="header-section-number">1.1</span> Laws</h2>
<ul class="list-disc list-outside mt-1 mb-3 pl-5">
<li><code>fmap id = id</code></li>
<li><code>fmap f . fmap g = fmap (f . g)</code></li>
</ul>
<hr />
<h1 class="text-2xl mt-5 mb-5" data-number="2" id="applicative"><span class="header-section-number">2</span> Applicative</h1>
<div class="sourceCode mb-3 notranslate" id="cb2"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb2-1"><a class="link link-hover text-zinc-600" href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> <span class="dt">Functor</span> f <span class="ot">=&gt;</span> <span class="dt">Applicative</span> f <span class="kw">where</span></span>
<span id="cb2-2"><a class="link link-hover text-zinc-600" href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="ot">  pure ::</span> a <span class="ot">-&gt;</span> f a</span>
<span id="cb2-3"><a class="link link-hover text-zinc-600" href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">&lt;*&gt;</span><span class="ot"> ::</span> f (a <span class="ot">-&gt;</span> b) <span class="ot">-&gt;</span> f a <span class="ot">-&gt;</span> f b</span></code></pre></div>
<p class="mb-3">An alternative definition could be:</p>
<div class="sourceCode mb-3 notranslate" id="cb3"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb3-1"><a class="link link-hover text-zinc-600" href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> <span class="dt">Functor</span> f <span class="ot">=&gt;</span> <span class="dt">Applicative</span> f <span class="kw">where</span></span>
<span id="cb3-2"><a class="link link-hover text-zinc-600" href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="ot">  pure ::</span> a <span class="ot">-&gt;</span> f a</span>
<span id="cb3-3"><a class="link link-hover text-zinc-600" href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="ot">  zip ::</span> (f a, f b) <span class="ot">-&gt;</span> f (a, b)</span></code></pre></div>
<h2 class="text-xl mt-5 mb-5" data-number="2.1" id="laws-1"><span class="header-section-number">2.1</span> Laws</h2>
<ul class="list-disc list-outside mt-1 mb-3 pl-5">
<li><code>pure id &lt;*&gt; v = v</code></li>
<li><code>pure f &lt;*&gt; pure x = pure (f x)</code></li>
<li><code>f &lt;*&gt; pure x = pure ($ x) &lt;*&gt; f</code></li>
<li><code>pure (.) &lt;*&gt; x &lt;*&gt; y &lt;*&gt; z = x &lt;*&gt; (y &lt;*&gt; z)</code></li>
</ul>
<p class="mb-3">or:</p>
<ul class="list-disc list-outside mt-1 mb-3 pl-5">
<li><code>zip (pure x) (pure y) = pure (x,y)</code></li>
<li><code>zip (pure x) y = fmap (x,) y</code></li>
<li><code>zip x (pure y) = fmap (,y) x</code></li>
<li><code>(\(a,(b,c)) -&gt; ((a,b),c)) $ zip x (zip y z) = zip (zip x y) z</code></li>
</ul>
<hr />
<h1 class="text-2xl mt-5 mb-5" data-number="3" id="monad"><span class="header-section-number">3</span> Monad</h1>
<pre><code>class Applicative m =&gt; Monad m where
  (&gt;&gt;=) :: m a -&gt; (a -&gt; m b) -&gt; m b</code></pre>
<p class="mb-3">An alternative definition could be:</p>
<pre><code>class Applicative m =&gt; Monad m where
  (&gt;=&gt;) :: (a -&gt; m b) -&gt; (b -&gt; m c) -&gt; (a -&gt; m c)</code></pre>
<h2 class="text-xl mt-5 mb-5" data-number="3.1" id="laws-2"><span class="header-section-number">3.1</span> Laws</h2>
<ul class="list-disc list-outside mt-1 mb-3 pl-5">
<li><code>pure a &gt;&gt;= f = f a</code></li>
<li><code>x &gt;&gt;= pure = x</code></li>
<li><code>(m &gt;&gt;= f) &gt;&gt;= g = m &gt;&gt;= (\x -&gt; f x &gt;&gt;= g)</code></li>
</ul>
<p class="mb-3">or:</p>
<ul class="list-disc list-outside mt-1 mb-3 pl-5">
<li><code>pure &gt;=&gt; f = f</code></li>
<li><code>f &gt;=&gt; pure = f</code></li>
<li><code>f &gt;=&gt; (g &gt;=&gt; h) = (f &gt;=&gt; g) &gt;=&gt; h</code></li>
</ul>
<hr />
<h1 class="text-2xl mt-5 mb-5" data-number="4" id="alternative"><span class="header-section-number">4</span> Alternative</h1>
<pre><code>class Applicative f =&gt; Alternative f where
  empty :: f a
  (&lt;|&gt;) :: f a -&gt; f a -&gt; f a</code></pre>
<h2 class="text-xl mt-5 mb-5" data-number="4.1" id="laws-3"><span class="header-section-number">4.1</span> Laws</h2>
<ul class="list-disc list-outside mt-1 mb-3 pl-5">
<li><code>empty &lt;|&gt; x = x</code></li>
<li><code>x &lt;|&gt; empty = x</code></li>
<li><code>x &lt;|&gt; (y &lt;|&gt; z) = (x &lt;|&gt; y) &lt;|&gt; z</code></li>
</ul>
<p class="mb-3">and:</p>
<ul class="list-disc list-outside mt-1 mb-3 pl-5">
<li><code>(f &lt;|&gt; g) &lt;*&gt; a = (f &lt;*&gt; a) &lt;|&gt; (g &lt;|&gt; a)</code></li>
<li><code>empty &lt;*&gt; a = empty</code></li>
<li><code>f &lt;$&gt; (a &lt;|&gt; b) = (f &lt;$&gt; a) &lt;|&gt; (f &lt;$&gt; b)</code></li>
<li><code>f &lt;$&gt; empty = empty</code></li>
</ul>
<hr />
<h1 class="text-2xl mt-5 mb-5" data-number="5" id="foldable"><span class="header-section-number">5</span> Foldable</h1>
<pre><code>class Foldable f where
  foldMap :: Monoid m =&gt; (a -&gt; m) -&gt; f a -&gt; m</code></pre>
<h2 class="text-xl mt-5 mb-5" data-number="5.1" id="laws-4"><span class="header-section-number">5.1</span> Laws</h2>
<p class="mb-3">There are no laws. However, when it is also a functor, it is expected that:</p>
<ul class="list-disc list-outside mt-1 mb-3 pl-5">
<li><code>foldMap f . fmap g = foldMap (f . g)</code></li>
</ul>
<p class="mb-3">also, if <code>t</code> is <em>monoid morphism</em>, that is:</p>
<pre><code>t mempty = mempty
t (a &lt;&gt; b) = t a &lt;&gt; t b</code></pre>
<p class="mb-3">it is expected that:</p>
<ul class="list-disc list-outside mt-1 mb-3 pl-5">
<li><code>t . foldMap f = foldMap (t . f)</code></li>
</ul>
<hr />
<h1 class="text-2xl mt-5 mb-5" data-number="6" id="traversable"><span class="header-section-number">6</span> Traversable</h1>
<pre><code>class (Functor t, Foldable t) =&gt; Traversable t where
  traverse :: Applicative f =&gt; (a -&gt; f b) -&gt; t a -&gt; f (t b)</code></pre>
<h2 class="text-xl mt-5 mb-5" data-number="6.1" id="laws-5"><span class="header-section-number">6.1</span> Laws</h2>
<p class="mb-3">Let <code>t</code> be an <em>applicative transformation</em>, that is:</p>
<pre><code>t (pure a) = pure a
t (a &lt;*&gt; b) = t a &lt;*&gt; t b</code></pre>
<p class="mb-3">then:</p>
<ul class="list-disc list-outside mt-1 mb-3 pl-5">
<li><code>t . traverse f = traverse (t . f)</code></li>
<li><code>traverse Identity = Identity</code></li>
<li><code>traverse (Compose . fmap g . f) = Compose . fmap (traverse g) . traverse f</code></li>
</ul>
<p class="mb-3">and:</p>
<ul class="list-disc list-outside mt-1 mb-3 pl-5">
<li><code>traverse (Identity . f) = Identity . fmap f</code></li>
<li><code>traverse (Const . f) = Const . foldMap f</code></li>
</ul>
        </main>

        <br>
        <br>
    </article>
</div>

</body>
</html>
